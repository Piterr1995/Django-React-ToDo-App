{"ast":null,"code":"var _jsxFileName = \"/home/piter/Pulpit/tododjreactIvy/frontend/src/App.js\";\nimport React from \"react\";\nimport \"./App.css\";\nimport axios from \"axios\";\n\nclass App extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      todoList: [],\n      activeItem: {\n        id: null,\n        title: \"\",\n        completed: false\n      },\n      editing: false\n    };\n\n    this.fetchTask = () => {\n      axios.get(\"http://127.0.0.1:8000/api/task-list\").then(res => {\n        console.log(res.data);\n        this.setState({\n          todoList: res.data\n        });\n      });\n    };\n\n    this.getCookie = name => {\n      var cookieValue = null;\n\n      if (document.cookie && document.cookie !== \"\") {\n        var cookies = document.cookie.split(\";\");\n\n        for (var i = 0; i < cookies.length; i++) {\n          var cookie = cookies[i].trim(); // Does this cookie string begin with the name we want?\n\n          if (cookie.substring(0, name.length + 1) === name + \"=\") {\n            cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n            break;\n          }\n        }\n      }\n\n      return cookieValue;\n    };\n\n    this.handleChange = e => {\n      let name = e.target.name; // da nam wartość name z inputu\n\n      let value = e.target.value;\n      console.log(\"Name\", name);\n      console.log(\"Value\", value);\n      this.setState({\n        activeItem: { ...this.state.activeItem,\n          title: value\n        }\n      });\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      console.log(\"Item: \", this.state.activeItem);\n      const url = \"http://127.0.0.1:8000/api/task-create/\"; // axios.post(url, { headers: { \"Content-Type\": \"application/json\" } });\n\n      axios.post(url, this.state.activeItem) //postuje słownika activeItem do backendu\n      .then(res => {\n        console.log(res);\n        this.fetchTask(); //pobiera listę\n\n        this.setState({\n          // resetuje stan activeItem\n          activeItem: {\n            id: null,\n            title: \"\",\n            completed: false\n          }\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.startEdit = task => {\n      this.setState({\n        activeItem: task,\n        editing: true\n      });\n    };\n  }\n\n  // żeby odpalić funkcję fetch task, trzeba dać this.fetchTask().\n  // inaczej nie zadziała, mimo, że nie przyjmuje argumentów to należy użyć ()\n  componentDidMount() {\n    this.fetchTask();\n  }\n\n  render() {\n    let tasks = this.state.todoList;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"task-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"form-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      id: \"form\",\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flex-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        flex: 6\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      onChange: this.handleChange,\n      placeholder: \"Add task\",\n      className: \"form-control\",\n      id: \"title\",\n      name: \"bry\",\n      value: this.state.activeItem.title //to nam wyczyści inputa po zatwierdzeniu\n      // gdy activeItem resetuje swe wartości\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        flex: 1\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      id: \"submit\",\n      type: \"submit\",\n      name: \"add\",\n      className: \"btn btn-warning\",\n      value: \"Submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 19\n      }\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"list-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 11\n      }\n    }, tasks.map((task, index) => /*#__PURE__*/React.createElement(\"div\", {\n      key: index,\n      className: \"task-wrapper flex-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        flex: 7\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 19\n      }\n    }, task.title)), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        flex: 1\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => this.startEdit(task) // musimy podać najpierw () bo inaczej odpali nam to od razu i będzie milion errorów\n      ,\n      className: \"btn btn-sm btn-outline-info\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 19\n      }\n    }, \"Edit\")), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        flex: 1\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-sm btn-outline-dark delete\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 19\n      }\n    }, \"-\")))))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/piter/Pulpit/tododjreactIvy/frontend/src/App.js"],"names":["React","axios","App","Component","state","todoList","activeItem","id","title","completed","editing","fetchTask","get","then","res","console","log","data","setState","getCookie","name","cookieValue","document","cookie","cookies","split","i","length","trim","substring","decodeURIComponent","handleChange","e","target","value","handleSubmit","preventDefault","url","post","catch","err","startEdit","task","componentDidMount","render","tasks","flex","map","index"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport \"./App.css\";\nimport axios from \"axios\";\n\nclass App extends React.Component {\n  state = {\n    todoList: [],\n    activeItem: {\n      id: null,\n      title: \"\",\n      completed: false,\n    },\n    editing: false,\n  };\n\n  // Tak ma wyglądać funkcja, żeby nie trzeba było bindować\n  fetchTask = () => {\n    axios.get(\"http://127.0.0.1:8000/api/task-list\").then((res) => {\n      console.log(res.data);\n      this.setState({\n        todoList: res.data,\n      });\n    });\n  };\n\n  // cookie skopiowane z dokumentacji django csrf. Mogą pojawiać się erroro\n  // kwestia zabezpieczeń\n  getCookie = (name) => {\n    var cookieValue = null;\n    if (document.cookie && document.cookie !== \"\") {\n      var cookies = document.cookie.split(\";\");\n      for (var i = 0; i < cookies.length; i++) {\n        var cookie = cookies[i].trim();\n        // Does this cookie string begin with the name we want?\n        if (cookie.substring(0, name.length + 1) === name + \"=\") {\n          cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n          break;\n        }\n      }\n    }\n    return cookieValue;\n  };\n\n  // żeby odpalić funkcję fetch task, trzeba dać this.fetchTask().\n  // inaczej nie zadziała, mimo, że nie przyjmuje argumentów to należy użyć ()\n  componentDidMount() {\n    this.fetchTask();\n  }\n\n  handleChange = (e) => {\n    let name = e.target.name; // da nam wartość name z inputu\n    let value = e.target.value;\n    console.log(\"Name\", name);\n    console.log(\"Value\", value);\n\n    this.setState({\n      activeItem: {\n        ...this.state.activeItem,\n        title: value,\n      },\n    });\n  };\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    console.log(\"Item: \", this.state.activeItem);\n\n    const url = \"http://127.0.0.1:8000/api/task-create/\";\n    // axios.post(url, { headers: { \"Content-Type\": \"application/json\" } });\n    axios\n      .post(url, this.state.activeItem) //postuje słownika activeItem do backendu\n      .then((res) => {\n        console.log(res);\n        this.fetchTask(); //pobiera listę\n        this.setState({\n          // resetuje stan activeItem\n          activeItem: {\n            id: null,\n            title: \"\",\n            completed: false,\n          },\n        });\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  startEdit = (task) => {\n    this.setState({\n      activeItem: task,\n      editing: true,\n    });\n  };\n  render() {\n    let tasks = this.state.todoList;\n    return (\n      <div className=\"container\">\n        <div id=\"task-container\">\n          <div id=\"form-wrapper\">\n            <form id=\"form\" onSubmit={this.handleSubmit}>\n              <div className=\"flex-wrapper\">\n                <div style={{ flex: 6 }}>\n                  {/* The flex-grow property specifies how much \n                the item will grow relative to the rest of the flexible items inside the same container. */}\n                  <input\n                    onChange={this.handleChange}\n                    placeholder=\"Add task\"\n                    className=\"form-control\"\n                    id=\"title\"\n                    name=\"bry\"\n                    value={this.state.activeItem.title} //to nam wyczyści inputa po zatwierdzeniu\n                    // gdy activeItem resetuje swe wartości\n                  />\n                </div>\n                <div style={{ flex: 1 }}>\n                  <input\n                    id=\"submit\"\n                    type=\"submit\"\n                    name=\"add\"\n                    className=\"btn btn-warning\"\n                    value=\"Submit\"\n                  />\n                </div>\n              </div>\n            </form>\n          </div>\n          <div id=\"list-wrapper\">\n            {tasks.map((task, index) => (\n              <div key={index} className=\"task-wrapper flex-wrapper\">\n                <div style={{ flex: 7 }}>\n                  {/* tutaj flex 7 a potem oznacza, że ten będzie 7x większy od 1, 14 2 2 zrobi to samo */}\n                  <span>{task.title}</span>\n                </div>\n                <div style={{ flex: 1 }}>\n                  <button\n                    onClick={() => this.startEdit(task)}\n                    // musimy podać najpierw () bo inaczej odpali nam to od razu i będzie milion errorów\n                    className=\"btn btn-sm btn-outline-info\"\n                  >\n                    Edit\n                  </button>\n                  {/* przekazujemy argument task, który mamy w obecnej iteracji */}\n                </div>\n                <div style={{ flex: 1 }}>\n                  <button className=\"btn btn-sm btn-outline-dark delete\">\n                    -\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}